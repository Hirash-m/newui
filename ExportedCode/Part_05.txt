===== FILE: src\app\views\base\login\loginForm\login\login.component.scss =====


===== FILE: src\app\views\base\login\loginForm\login\login.component.spec.ts =====
import { ComponentFixture, TestBed } from '@angular/core/testing';

import { ButtonModule, CardModule, FormModule, GridModule } from '@coreui/angular';
import { LoginComponent } from './login.component';
import { IconModule } from '@coreui/icons-angular';
import { IconSetService } from '@coreui/icons-angular';
import { iconSubset } from '../../../icons/icon-subset';

describe('LoginComponent', () => {
  let component: LoginComponent;
  let fixture: ComponentFixture<LoginComponent>;
  let iconSetService: IconSetService;

  beforeEach(async () => {
    await TestBed.configureTestingModule({
    imports: [FormModule, CardModule, GridModule, ButtonModule, IconModule, LoginComponent],
    providers: [IconSetService]
})
    .compileComponents();
  });

  beforeEach(() => {
    iconSetService = TestBed.inject(IconSetService);
    iconSetService.icons = { ...iconSubset };

    fixture = TestBed.createComponent(LoginComponent);
    component = fixture.componentInstance;
    fixture.detectChanges();
  });

  it('should create', () => {
    expect(component).toBeTruthy();
  });
});


===== FILE: src\app\views\base\login\loginForm\login\login.component.ts =====
import { Component } from '@angular/core';
import { NgStyle, NgIf } from '@angular/common';
import { Router } from '@angular/router';
import { IconDirective } from '@coreui/icons-angular';
import {
  ContainerComponent,
  RowComponent,
  ColComponent,
  CardGroupComponent,
  TextColorDirective,
  CardComponent,
  CardBodyComponent,
  FormDirective,
  InputGroupComponent,
  InputGroupTextDirective,
  FormControlDirective,
  ButtonDirective
} from '@coreui/angular';
import { FormsModule } from '@angular/forms';
import { AuthService } from '../../../../../services/auth/login/auth.service';
import { ToastService } from '../../../../../services/utilities/toast.service';

@Component({
  selector: 'app-login',
  templateUrl: './login.component.html',
  styleUrls: ['./login.component.scss'],
  standalone: true,
  imports: [
    ContainerComponent,
    RowComponent,
    ColComponent,
    CardGroupComponent,
    TextColorDirective,
    CardComponent,
    CardBodyComponent,
    FormDirective,
    InputGroupComponent,
    InputGroupTextDirective,
    IconDirective,
    FormControlDirective,
    ButtonDirective,
    FormsModule,

  ]
})
export class LoginComponent {
  email: string = '';
  password: string = '';
  loading: boolean = false;

  constructor(
    private authService: AuthService,
    private toast: ToastService,
    private router: Router
  ) {}

  onLogin() {
    if (!this.email || !this.password) {
 
      return;
    }

    this.loading = true;

    this.authService.login(this.email, this.password).subscribe({
      next: (res) => {
        this.loading = false;
        if (res.isSucceeded) {

          this.router.navigate(['/dashboard']);
        } else {
     
        }
      },
      error: (err) => {
        this.loading = false;
      
      }
    });
  }
}


===== FILE: src\app\views\base\userManage\user\user.component.html =====


<!-- Ø¯Ú©Ù…Ù‡â€ŒÛŒ Ø¨Ø§Ø² Ú©Ø±Ø¯Ù† ÙØ±Ù… Ù¾Ø§Ù¾â€ŒØ¢Ù¾ -->
<button cButton color="primary" (click)="showModal = true">âž• Ø§ÛŒØ¬Ø§Ø¯ </button>
<button
  cButton
  color="danger"
  [disabled]="selectedIds.length === 0"
  (click)="showDeleteConfirm = true"
>
ðŸ—‘ Ø­Ø°Ù Ø§Ù†ØªØ®Ø§Ø¨â€ŒØ´Ø¯Ù‡â€ŒÙ‡Ø§ ({{ selectedIds.length }})
</button>


<!-- Table -->

<table cTable>
  <thead>
    <tr>
      <th>Ø§Ù†ØªØ®Ø§Ø¨</th>
      <th>Ø´Ù†Ø§Ø³Ù‡</th>
      <th>Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ</th>
      <th>Ø§ÛŒÙ…ÛŒÙ„</th>
      <th>Ú©Ù„Ù…Ù‡ Ø¹Ø¨ÙˆØ±</th>
      <th>Ù†Ø§Ù… Ú©Ø§Ù…Ù„ </th>
      <th>Ø¹Ù…Ù„ÛŒØ§Øª</th>
    </tr>
  </thead>
  <tbody>
     <tr *ngFor="let row of _objectsView">
      <td> <input type="checkbox" [checked]="isSelected(row.id)" (change)="toggleSelection(row.id)" /> </td>
      <td>{{row.id}}</td>
      <td>{{row.username}}</td>
      <td>   {{row.email}}   </td>
      <td>   {{row.Password}}   </td>
      <td>   {{row.fullName}}   </td>
         <td>
          <button class="btn btn-sm btn-warning me-1"    (click)="onEdit(row.id)" > âœ ÙˆÛŒØ±Ø§ÛŒØ´</button>
        </td>
    </tr>
  </tbody>
</table>



<!--nodata banner -->

<div *ngIf="_objectsView.length === 0" class="alert alert-info text-center">
  â• Ù‡ÛŒÚ† Ø¯Ø§Ø¯Ù‡â€ŒØ§ÛŒ ÛŒØ§ÙØª Ù†Ø´Ø¯.
</div>



<div class="d-flex justify-content-between align-items-center mt-3">

  <!-- Ø®ÙˆØ¯ pagination -->
  <c-pagination aria-label="Page navigation example">
    <li cPageItem *ngIf="_baseResponse.pageNumber > 3">
      <button cPageLink aria-label="First" (click)="changePage(1)">
        <span aria-hidden="true">&laquo;</span>
      </button>
    </li>

    <li cPageItem *ngIf="_baseResponse.pageNumber > 1">
      <button cPageLink aria-label="Previous" (click)="changePage(_baseResponse.pageNumber - 1)">
        <span aria-hidden="true">&lt;</span>
      </button>
    </li>

    <li cPageItem *ngIf="_baseResponse.pageNumber > 2">
      <button cPageLink (click)="changePage(_baseResponse.pageNumber - 2)">
        {{ _baseResponse.pageNumber - 2 }}
      </button>
    </li>

    <li cPageItem *ngIf="_baseResponse.pageNumber > 1">
      <button cPageLink (click)="changePage(_baseResponse.pageNumber - 1)">
        {{ _baseResponse.pageNumber - 1 }}
      </button>
    </li>

    <li cPageItem>
      <button cPageLink class="active" disabled>
        {{ _baseResponse.pageNumber }}
      </button>
    </li>

    <li cPageItem *ngIf="_baseResponse.totalPages > _baseResponse.pageNumber">
      <button cPageLink (click)="changePage(_baseResponse.pageNumber + 1)">
        {{ _baseResponse.pageNumber + 1 }}
      </button>
    </li>

    <li cPageItem *ngIf="_baseResponse.totalPages > _baseResponse.pageNumber + 1">
      <button cPageLink (click)="changePage(_baseResponse.pageNumber + 2)">
        {{ _baseResponse.pageNumber + 2 }}
      </button>
    </li>

    <li cPageItem *ngIf="_baseResponse.totalPages > _baseResponse.pageNumber">
      <button cPageLink aria-label="Next" (click)="changePage(_baseResponse.pageNumber + 1)">
        <span aria-hidden="true">&gt;</span>
      </button>
    </li>

    <li cPageItem *ngIf="_baseResponse.totalPages > _baseResponse.pageNumber + 2">
      <button cPageLink aria-label="Last" (click)="changePage(_baseResponse.totalPages)">
        <span aria-hidden="true">&raquo;</span>
      </button>
    </li>
  </c-pagination>

  <!-- Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø±Ú©ÙˆØ±Ø¯ -->
  <div class="text-muted">
    <strong>{{_baseResponse.totalRecords}}</strong> Ø±Ú©ÙˆØ±Ø¯ Ø¯Ø± <strong>{{_baseResponse.totalPages}}</strong> ØµÙØ­Ù‡
  </div>

</div>






<!-- Ù…ÙˆØ¯Ø§Ù„ ÙØ±Ù… Ø§ÙØ²ÙˆØ¯Ù† Ù…Ø­ØµÙˆÙ„ -->
<c-modal [(visible)]="showModal" size="lg" backdrop="static">
  <c-modal-header>
    <h5 class="modal-title">{{ editMode ? 'ÙˆÛŒØ±Ø§ÛŒØ´ ' : 'Ø§ÙØ²ÙˆØ¯Ù†' }}</h5>
    <button type="button" class="btn-close" aria-label="Close" (click)="showModal = false"></button>
  </c-modal-header>

  <c-modal-body>
    <!-- ÙØ±Ù… Ø¯Ø§Ø®Ù„ Ù…ÙˆØ¯Ø§Ù„ -->
    <form [formGroup]="ObjectForm"  (ngSubmit)="onSubmit1()" class="needs-validation" novalidate cForm cRow>

      <!-- Ù†Ø§Ù… -->
      <c-col [md]="6">
        <label cLabel for="username">Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ </label>
        <input cFormControl id="username" name="username" type="text" required formControlName="username">
        <c-form-feedback [valid]="false">Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯.</c-form-feedback>
      </c-col>

      <c-col [md]="6">
        <label cLabel for="email">Ø§ÛŒÙ…ÛŒÙ„ </label>
        <input cFormControl id="email" name="email" type="email" required formControlName="email">
        <c-form-feedback [valid]="false">Ø§ÛŒÙ…ÛŒÙ„ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯.</c-form-feedback>
      </c-col>
      <c-col [md]="6">
        <label cLabel for="fullName">Ù†Ø§Ù… Ú©Ø§Ù…Ù„ </label>
        <input cFormControl id="fullName" name="fullName" type="text" required formControlName="fullName">
        <c-form-feedback [valid]="false">Ø§ÛŒÙ…ÛŒÙ„ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯.</c-form-feedback>
      </c-col>

      <c-col [md]="6">
        <label cLabel for="Password">Ú©Ù„Ù…Ù‡ Ø¹Ø¨ÙˆØ± </label>
        <input cFormControl id="Password" name="Password" type="Password"  formControlName="Password">
        <c-form-feedback [valid]="false">Ú©Ù„Ù…Ù‡ Ø¹Ø¨ÙˆØ±  Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯.</c-form-feedback>
      </c-col>

 
<!-- Ø¨Ø®Ø´ Ù†Ù‚Ø´â€ŒÙ‡Ø§ -->
<c-col [md]="12">
  <label cLabel>Ù†Ù‚Ø´â€ŒÙ‡Ø§</label>
  <div *ngFor="let role of roles" class="form-check">
    <input
      type="checkbox"
      class="form-check-input"
      [id]="'role-' + role.id"
      [value]="role.id"
      [checked]="ObjectForm.get('roleIds')?.value.includes(role.id)"
      (change)="toggleRole($event, role.id)"
    >
    <label class="form-check-label" [for]="'role-' + role.id">
      {{ role.name }}
    </label>
  </div>
</c-col>


    </form>
  </c-modal-body>

  <c-modal-footer>
    <!-- Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ÛŒ Ø§Ø±Ø³Ø§Ù„ Ùˆ Ø¨Ø³ØªÙ† -->
    <button cButton color="secondary" (click)="closeModal()" >Ø¨Ø³ØªÙ†</button>
    <button cButton color="primary" type="submit" (click)="onSubmit1()"  [disabled]="!ObjectForm.valid "  >Ø°Ø®ÛŒØ±Ù‡</button>
  </c-modal-footer>
</c-modal>



<c-modal [(visible)]="showDeleteConfirm" col="6" backdrop="static">
  <c-modal-header>
    <h5 class="modal-title">â— ØªØ£ÛŒÛŒØ¯ Ø­Ø°Ù</h5>
    <button type="button" class="btn-close" (click)="showDeleteConfirm = false" aria-label="Close"></button>
  </c-modal-header>

  <c-modal-body>
    <p>Ø¢ÛŒØ§ Ù…Ø·Ù…Ø¦Ù† Ù‡Ø³ØªÛŒØ¯ Ú©Ù‡ Ù…ÛŒâ€ŒØ®ÙˆØ§Ù‡ÛŒØ¯ <strong>{{ selectedIds.length }}</strong> Ù…Ø­ØµÙˆÙ„ Ø§Ù†ØªØ®Ø§Ø¨â€ŒØ´Ø¯Ù‡ Ø±Ø§ Ø­Ø°Ù Ú©Ù†ÛŒØ¯ØŸ</p>
  </c-modal-body>

  <c-modal-footer>
    <button cButton color="secondary" (click)="showDeleteConfirm = false">Ø§Ù†ØµØ±Ø§Ù</button>
    <button cButton color="danger" (click)="deleteSelectedRecords()">ØªØ£ÛŒÛŒØ¯ Ø­Ø°Ù</button>
  </c-modal-footer>
</c-modal>


===== FILE: src\app\views\base\userManage\user\user.component.scss =====


===== FILE: src\app\views\base\userManage\user\user.component.spec.ts =====
import { ComponentFixture, TestBed } from '@angular/core/testing';

import { UserComponent } from './user.component';

describe('UserComponent', () => {
  let component: UserComponent;
  let fixture: ComponentFixture<UserComponent>;

  beforeEach(async () => {
    await TestBed.configureTestingModule({
      imports: [UserComponent]
    })
    .compileComponents();

    fixture = TestBed.createComponent(UserComponent);
    component = fixture.componentInstance;
    fixture.detectChanges();
  });

  it('should create', () => {
    expect(component).toBeTruthy();
  });
});


===== FILE: src\app\views\base\userManage\user\user.component.ts =====
import { CommonModule } from '@angular/common';
import { Component } from '@angular/core';
import { FormBuilder, FormGroup, FormsModule, ReactiveFormsModule, Validators } from '@angular/forms';
import { ButtonDirective, ColComponent, FormDirective, FormFeedbackComponent, FormLabelDirective, ModalModule, PageItemDirective, PageLinkDirective, PaginationComponent, RowDirective, TableDirective } from '@coreui/angular';
import { PermissionDto, RoleDto, UserCreateFormData, UserDto } from 'src/app/dto/base/UserDto';
import { baseResponse } from 'src/app/dto/baseResponse';
import { ListRequest } from 'src/app/dto/ListRequestDto';
import { UserManageService } from 'src/app/services/base/userManage/user-manage.service';
import { ToastService } from 'src/app/services/utilities/toast.service';

@Component({
  selector: 'app-user',
  imports: [
 // UI modules
 CommonModule, TableDirective, PaginationComponent, PageItemDirective, PageLinkDirective,
 ButtonDirective, ColComponent, FormDirective, FormFeedbackComponent,
 FormLabelDirective, RowDirective, ModalModule,

 // Form modules
 FormsModule, ReactiveFormsModule,

  ],
  templateUrl: './user.component.html',
  styleUrl: './user.component.scss'
})
export class UserComponent {


  
  constructor(
    private fb: FormBuilder,
    private ObjectService: UserManageService ,
    private toastService: ToastService
  ) {}


    // ---------------------------
  // Properties
  // ---------------------------


  roles: RoleDto[] = []; // Ù„ÛŒØ³Øª Ù†Ù‚Ø´â€ŒÙ‡Ø§
  permissions: PermissionDto[] = []; // Ù„ÛŒØ³Øª Ø¯Ø³ØªØ±Ø³ÛŒâ€ŒÙ‡Ø§
  selectedPermissionIds: number[] = []; // IDÙ‡Ø§ÛŒ Ø¯Ø³ØªØ±Ø³ÛŒâ€ŒÙ‡Ø§ÛŒ Ø§Ù†ØªØ®Ø§Ø¨â€ŒØ´Ø¯Ù‡
  _request = new ListRequest();
  _objectsView: UserDto[] = [];
  _baseResponse = new baseResponse;

    // ÙØ±Ù…
    ObjectForm!: FormGroup;

    // ÙˆØ¶Ø¹ÛŒØª Ù…Ø¯Ø§Ù„
    showModal = false;
  
    // ÙˆØ¶Ø¹ÛŒØª ÙˆÛŒØ±Ø§ÛŒØ´
    editMode = false;
    editingId: number | null = null;

      // Ø¢ÛŒØªÙ…â€ŒÙ‡Ø§ÛŒ Ø§Ù†ØªØ®Ø§Ø¨â€ŒØ´Ø¯Ù‡
  selectedIds: number[] = [];

  // Ù†Ù…Ø§ÛŒØ´ ØªØ§ÛŒÛŒØ¯ Ø­Ø°Ù
  showDeleteConfirm = false;

  // ---------------------------
  // Lifecycle
  // ---------------------------
  ngOnInit(): void {
    this.initForm();
    this.loadDataTable();
    this.loadCreateFormData();
  }


  // ---------------------------
  // Init Form
  // ---------------------------
  initForm() {
    this.ObjectForm = this.fb.group({
      id: [null],
      username: ['', Validators.required],
      email: ['', Validators.required ],
      Password: ['', this.editMode ? [] : [Validators.required]],
      fullName: ['', Validators.required],
      roleIds: [[]]
      
    });
  }

 // ---------------------------
  // CRUD Methods
  // ---------------------------

  // Ø¯Ø±ÛŒØ§ÙØª Ù„ÛŒØ³Øª Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ (Table)
  loadDataTable(): void {
    this._request.pageSize = 5;

    this.ObjectService.getRecords(this._request).subscribe((res) => {
      if (res.isSucceeded) {
        this._baseResponse = res;
        this._objectsView = res.data;
        
        // this.toastService.showToast.success({message:this._baseResponse.message})
      }
    });
  }



  loadCreateFormData(): void {
    this.ObjectService.getCreateForm().subscribe(res => {
        if (res.isSucceeded && res.singleData) {
            const formData = res.singleData as unknown as UserCreateFormData;
            this.roles = formData.roles || [];
            // this.permissions = formData.permissions || [];
        } else {
        
        }
    });
}

  



toggleRole(event: Event, roleId: number): void {
  const input = event.target as HTMLInputElement;
  const roleIds = this.ObjectForm.get('roleIds')?.value || [];

  if (input.checked) {
      roleIds.push(roleId);
  } else {
      const index = roleIds.indexOf(roleId);
      if (index > -1) {
          roleIds.splice(index, 1);
      }
  }

  this.ObjectForm.get('roleIds')?.setValue(roleIds);
}



  // Ø§ÛŒØ¬Ø§Ø¯ / ÙˆÛŒØ±Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡
  onSubmit1() {
    if (this.ObjectForm.valid) {
      const ObjectData: UserDto = this.ObjectForm.value;

      if (this.editMode && this.editingId != null) {
        // Ø¯Ø± Ø­Ø§Ù„Øª ÙˆÛŒØ±Ø§ÛŒØ´
        this.ObjectService.updateRecord(ObjectData).subscribe(res => {
          if (res.isSucceeded) {
           
            this.afterSubmit();
          } else {
         
          }
        });
      } else {
        // Ø¯Ø± Ø­Ø§Ù„Øª Ø§ÛŒØ¬Ø§Ø¯
        this.ObjectService.insertRecord(ObjectData).subscribe(res => {
          if (res.isSucceeded) {
        
            this.afterSubmit();
          } else {
      
          }
        });
      }
    }
  }


  // Ø¹Ù…Ù„ÛŒØ§Øª Ù¾Ø³ Ø§Ø² Ø«Ø¨Øª ÛŒØ§ ÙˆÛŒØ±Ø§ÛŒØ´
  afterSubmit() {
    this.loadDataTable();
    this.showModal = false;
    this.ObjectForm.reset({
      id: null,
      username: '',
      fullName: '',
      email: '',
      Password: '',
      roleIds: [] 
    });
    this.editMode = false;
    this.editingId = null;
  }




  closeModal() {
    this.showModal = false;
    this.ObjectForm.reset({
      id: null,
      username: '',
      fullName: '',
      email: '',
      Password: '',
      roleIds: [] 
    });
    this.editMode = false;
    this.editingId = null;
    this.initForm();
  }

  // Ø¯Ø±ÛŒØ§ÙØª Ùˆ Ù†Ù…Ø§ÛŒØ´ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø¬Ù‡Øª ÙˆÛŒØ±Ø§ÛŒØ´
  onEdit(ObjectId: number) {
    this.editMode = true;
    this.editingId = ObjectId;
  
    this.ObjectForm.get('Password')?.clearValidators();
    this.ObjectForm.get('Password')?.updateValueAndValidity();

    this.ObjectService.getRecordById(ObjectId).subscribe(res => {
      if (res.isSucceeded && res.singleData) {
        const Object = res.singleData;
       
  
        this.ObjectForm.patchValue({
          id: Object.id,
          username: Object.username,
          fullName: Object.fullName,
          email: Object.email,
          Password: Object.Password || "",
          roleIds: Object.roleIds || [] // Ø§Ú¯Ø± roleIds null ÛŒØ§ undefined Ø¨ÙˆØ¯ØŒ Ø¢Ø±Ø§ÛŒÙ‡ Ø®Ø§Ù„ÛŒ Ø¨Ø±Ú¯Ø±Ø¯ÙˆÙ†
        });
  
        this.showModal = true;
      } else {
        this.toastService.error('Ù…ÙˆØ±Ø¯ Ù¾ÛŒØ¯Ø§ Ù†Ø´Ø¯ ÛŒØ§ Ø®Ø·Ø§ Ø¯Ø± Ø¯Ø±ÛŒØ§ÙØª Ø§Ø·Ù„Ø§Ø¹Ø§Øª!' );
      }
    });
  }

  // ---------------------------
  // Pagination
  // ---------------------------
  changePage(pagenumber: number) {
    this._request.pageNumber = pagenumber;
    this.loadDataTable();
  }

  // ---------------------------
  // Selection for Delete
  // ---------------------------
  isSelected(objectId: number): boolean {
    return this.selectedIds.includes(objectId);
  }

  toggleSelection(ObjectId: number): void {
    const index = this.selectedIds.indexOf(ObjectId);
    if (index > -1) {
      this.selectedIds.splice(index, 1);
    } else {
      this.selectedIds.push(ObjectId);
    }
  }

  // ---------------------------
  // Delete Operation
  // ---------------------------
  deleteSelectedRecords(): void {
    this.ObjectService.deleteRecords(this.selectedIds).subscribe(res => {
      if (res.isSucceeded) {
       
        this.afterSubmit(); // Ø±ÛŒØ³Øª ÙØ±Ù… Ùˆ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù…Ø¬Ø¯Ø¯
        this.selectedIds = [];
      } else {
        this.toastService.error( 'Ø®Ø·Ø§ Ø¯Ø± Ø­Ø°Ù Ú¯Ø±ÙˆÙ‡ÛŒ' );
      }
      this.showDeleteConfirm = false;
    });
  }
}


===== FILE: src\app\views\base\routes.ts =====
import { Routes } from '@angular/router';

export const routes: Routes = [
  {
    path: '',
    data: {
      title: 'base'
    },
    children: [
      {
        path: '',
        redirectTo: 'coreui-icons',
        pathMatch: 'full'
      },
      {
        path: 'user',
        loadComponent: () => import('./userManage/user/user.component').then(m => m.UserComponent),
        data: {
          title: 'Ù„ÛŒØ³Øª Ù…Ø­ØµÙˆÙ„Ø§Øª '
        }
      },
      
    ]
  }
];


===== FILE: src\app\views\shop\count-type\count-type.component.html =====


<!-- Ø¯Ú©Ù…Ù‡â€ŒÛŒ Ø¨Ø§Ø² Ú©Ø±Ø¯Ù† ÙØ±Ù… Ù¾Ø§Ù¾â€ŒØ¢Ù¾ -->
<button cButton color="primary" (click)="showModal = true">âž• Ø§ÛŒØ¬Ø§Ø¯ </button>
<button
  cButton
  color="danger"
  [disabled]="selectedIds.length === 0"
  (click)="showDeleteConfirm = true"
>
ðŸ—‘ Ø­Ø°Ù Ø§Ù†ØªØ®Ø§Ø¨â€ŒØ´Ø¯Ù‡â€ŒÙ‡Ø§ ({{ selectedIds.length }})
</button>


<!-- Table -->

<table cTable>
  <thead>
    <tr>
      <th>Ø§Ù†ØªØ®Ø§Ø¨</th>
      <th>Ø´Ù†Ø§Ø³Ù‡</th>
      <th>Ù†Ø§Ù…</th>
      <th>Ø¹Ù…Ù„ÛŒØ§Øª</th>
    </tr>
  </thead>
  <tbody>
     <tr *ngFor="let row of _objectsView">
      <th> <input type="checkbox" [checked]="isSelected(row.id)" (change)="toggleSelection(row.id)" /> </th>
      <th>{{row.id}}</th>
      <th>{{row.name}}</th>
         <td>
          <button class="btn btn-sm btn-warning me-1"    (click)="onEdit(row.id)" > âœ ÙˆÛŒØ±Ø§ÛŒØ´</button>
        </td>
    </tr>
  </tbody>
</table>



<!--nodata banner -->

<div *ngIf="_objectsView.length === 0" class="alert alert-info text-center">
  â• Ù‡ÛŒÚ† Ø¯Ø§Ø¯Ù‡â€ŒØ§ÛŒ ÛŒØ§ÙØª Ù†Ø´Ø¯.
</div>



<div class="d-flex justify-content-between align-items-center mt-3">

  <!-- Ø®ÙˆØ¯ pagination -->
  <c-pagination aria-label="Page navigation example">
    <li cPageItem *ngIf="_baseResponse.pageNumber > 3">
      <button cPageLink aria-label="First" (click)="changePage(1)">
        <span aria-hidden="true">&laquo;</span>
      </button>
    </li>

    <li cPageItem *ngIf="_baseResponse.pageNumber > 1">
      <button cPageLink aria-label="Previous" (click)="changePage(_baseResponse.pageNumber - 1)">
        <span aria-hidden="true">&lt;</span>
      </button>
    </li>

    <li cPageItem *ngIf="_baseResponse.pageNumber > 2">
      <button cPageLink (click)="changePage(_baseResponse.pageNumber - 2)">
        {{ _baseResponse.pageNumber - 2 }}
      </button>
    </li>

    <li cPageItem *ngIf="_baseResponse.pageNumber > 1">
      <button cPageLink (click)="changePage(_baseResponse.pageNumber - 1)">
        {{ _baseResponse.pageNumber - 1 }}
      </button>
    </li>

    <li cPageItem>
      <button cPageLink class="active" disabled>
        {{ _baseResponse.pageNumber }}
      </button>
    </li>

    <li cPageItem *ngIf="_baseResponse.totalPages > _baseResponse.pageNumber">
      <button cPageLink (click)="changePage(_baseResponse.pageNumber + 1)">
        {{ _baseResponse.pageNumber + 1 }}
      </button>
    </li>

    <li cPageItem *ngIf="_baseResponse.totalPages > _baseResponse.pageNumber + 1">
      <button cPageLink (click)="changePage(_baseResponse.pageNumber + 2)">
        {{ _baseResponse.pageNumber + 2 }}
      </button>
    </li>

    <li cPageItem *ngIf="_baseResponse.totalPages > _baseResponse.pageNumber">
      <button cPageLink aria-label="Next" (click)="changePage(_baseResponse.pageNumber + 1)">
        <span aria-hidden="true">&gt;</span>
      </button>
    </li>

    <li cPageItem *ngIf="_baseResponse.totalPages > _baseResponse.pageNumber + 2">
      <button cPageLink aria-label="Last" (click)="changePage(_baseResponse.totalPages)">
        <span aria-hidden="true">&raquo;</span>
      </button>
    </li>
  </c-pagination>

  <!-- Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø±Ú©ÙˆØ±Ø¯ -->
  <div class="text-muted">
    <strong>{{_baseResponse.totalRecords}}</strong> Ø±Ú©ÙˆØ±Ø¯ Ø¯Ø± <strong>{{_baseResponse.totalPages}}</strong> ØµÙØ­Ù‡
  </div>

</div>






<!-- Ù…ÙˆØ¯Ø§Ù„ ÙØ±Ù… Ø§ÙØ²ÙˆØ¯Ù† Ù…Ø­ØµÙˆÙ„ -->
<c-modal [(visible)]="showModal" size="lg" backdrop="static">
  <c-modal-header>
    <h5 class="modal-title">{{ editMode ? 'ÙˆÛŒØ±Ø§ÛŒØ´ ' : 'Ø§ÙØ²ÙˆØ¯Ù†' }}</h5>
    <button type="button" class="btn-close" aria-label="Close" (click)="showModal = false"></button>
  </c-modal-header>

  <c-modal-body>
    <!-- ÙØ±Ù… Ø¯Ø§Ø®Ù„ Ù…ÙˆØ¯Ø§Ù„ -->
    <form [formGroup]="ObjectForm"  (ngSubmit)="onSubmit1()" class="needs-validation" novalidate cForm cRow>

      <!-- Ù†Ø§Ù… -->
      <c-col [md]="6">
        <label cLabel for="name">Ù†Ø§Ù… </label>
        <input cFormControl id="name" name="name" type="text" required formControlName="name" />
        <c-form-feedback [valid]="false">Ù†Ø§Ù… Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯.</c-form-feedback>
      </c-col>







    </form>
  </c-modal-body>

  <c-modal-footer>
    <!-- Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ÛŒ Ø§Ø±Ø³Ø§Ù„ Ùˆ Ø¨Ø³ØªÙ† -->
    <button cButton color="secondary" (click)="showModal = false">Ø¨Ø³ØªÙ†</button>
    <button cButton color="primary" type="submit" (click)="onSubmit1()"  [disabled]="!ObjectForm.valid "  >Ø°Ø®ÛŒØ±Ù‡</button>
  </c-modal-footer>
</c-modal>



<c-modal [(visible)]="showDeleteConfirm" col="6" backdrop="static">
  <c-modal-header>
    <h5 class="modal-title">â— ØªØ£ÛŒÛŒØ¯ Ø­Ø°Ù</h5>
    <button type="button" class="btn-close" (click)="showDeleteConfirm = false" aria-label="Close"></button>
  </c-modal-header>

  <c-modal-body>
    <p>Ø¢ÛŒØ§ Ù…Ø·Ù…Ø¦Ù† Ù‡Ø³ØªÛŒØ¯ Ú©Ù‡ Ù…ÛŒâ€ŒØ®ÙˆØ§Ù‡ÛŒØ¯ <strong>{{ selectedIds.length }}</strong> Ù…Ø­ØµÙˆÙ„ Ø§Ù†ØªØ®Ø§Ø¨â€ŒØ´Ø¯Ù‡ Ø±Ø§ Ø­Ø°Ù Ú©Ù†ÛŒØ¯ØŸ</p>
  </c-modal-body>

  <c-modal-footer>
    <button cButton color="secondary" (click)="showDeleteConfirm = false">Ø§Ù†ØµØ±Ø§Ù</button>
    <button cButton color="danger" (click)="deleteSelectedRecords()">ØªØ£ÛŒÛŒØ¯ Ø­Ø°Ù</button>
  </c-modal-footer>
</c-modal>


===== FILE: src\app\views\shop\count-type\count-type.component.scss =====


===== FILE: src\app\views\shop\count-type\count-type.component.spec.ts =====
import { ComponentFixture, TestBed } from '@angular/core/testing';

import { CountTypeComponent } from './count-type.component';

describe('CountTypeComponent', () => {
  let component: CountTypeComponent;
  let fixture: ComponentFixture<CountTypeComponent>;

  beforeEach(async () => {
    await TestBed.configureTestingModule({
      imports: [CountTypeComponent]
    })
    .compileComponents();

    fixture = TestBed.createComponent(CountTypeComponent);
    component = fixture.componentInstance;
    fixture.detectChanges();
  });

  it('should create', () => {
    expect(component).toBeTruthy();
  });
});


===== FILE: src\app\views\shop\count-type\count-type.component.ts =====
// ---------------------------
// Import Dependencies
// ---------------------------
import { CommonModule } from '@angular/common';
import { Component, OnInit } from '@angular/core';
import { FormBuilder, FormGroup, FormsModule, ReactiveFormsModule, Validators } from '@angular/forms';

// CoreUI components & directives
import {
  ButtonDirective, ColComponent,
  FormDirective, FormFeedbackComponent, FormLabelDirective, ModalModule,
  PageItemDirective, PageLinkDirective,
  PaginationComponent, RowDirective, TableDirective
} from '@coreui/angular';

// DTOs & Services
import { baseResponse } from 'src/app/dto/baseResponse';
import { ListRequest } from 'src/app/dto/ListRequestDto';
import { CountTypeDto } from 'src/app/dto/shop/CountTypeDto';
import { CountTypeService } from 'src/app/services/shop/countType/count-type.service';
import { ToastService } from 'src/app/services/utilities/toast.service';

// ---------------------------
// Component Definition
// ---------------------------
@Component({
  selector: 'app-count-type',
  imports: [
    // UI modules
    CommonModule, TableDirective, PaginationComponent, PageItemDirective, PageLinkDirective,
    ButtonDirective, ColComponent, FormDirective, FormFeedbackComponent,
    FormLabelDirective, RowDirective, ModalModule,

    // Form modules
    FormsModule, ReactiveFormsModule,
  ],
  templateUrl: './count-type.component.html',
  styleUrl: './count-type.component.scss'
})
export class CountTypeComponent implements OnInit {

  constructor(
    private fb: FormBuilder,
    private countTypeService: CountTypeService,
    private toastService: ToastService
  ) {}

  // ---------------------------
  // Properties
  // ---------------------------

  _request = new ListRequest();
  _objectsView: CountTypeDto[] = [];
  _baseResponse = new baseResponse;

  // ÙØ±Ù…
  ObjectForm!: FormGroup;

  // ÙˆØ¶Ø¹ÛŒØª Ù…Ø¯Ø§Ù„
  showModal = false;

  // ÙˆØ¶Ø¹ÛŒØª ÙˆÛŒØ±Ø§ÛŒØ´
  editMode = false;
  editingId: number | null = null;

  // Ø¢ÛŒØªÙ…â€ŒÙ‡Ø§ÛŒ Ø§Ù†ØªØ®Ø§Ø¨â€ŒØ´Ø¯Ù‡
  selectedIds: number[] = [];

  // Ù†Ù…Ø§ÛŒØ´ ØªØ§ÛŒÛŒØ¯ Ø­Ø°Ù
  showDeleteConfirm = false;

  // ---------------------------
  // Lifecycle
  // ---------------------------
  ngOnInit(): void {
    this.initForm();
    this.loadDataTable();
  }

  // ---------------------------
  // Init Form
  // ---------------------------
  initForm() {
    this.ObjectForm = this.fb.group({
      id: [null],
      name: ['', Validators.required],
    });
  }

  // ---------------------------
  // CRUD Methods
  // ---------------------------

  // Ø¯Ø±ÛŒØ§ÙØª Ù„ÛŒØ³Øª Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ (Table)
  loadDataTable(): void {
    this._request.pageSize = 5;

    this.countTypeService.getRecords(this._request).subscribe((res) => {
      if (res.isSucceeded) {
        this._baseResponse = res;
        this._objectsView = res.data;

      }
    });
  }

  // Ø§ÛŒØ¬Ø§Ø¯ / ÙˆÛŒØ±Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡
  onSubmit1() {
    if (this.ObjectForm.valid) {
      const ObjectData: CountTypeDto = this.ObjectForm.value;

      if (this.editMode && this.editingId != null) {
        // Ø¯Ø± Ø­Ø§Ù„Øª ÙˆÛŒØ±Ø§ÛŒØ´
        this.countTypeService.updateRecord(ObjectData).subscribe(res => {
          if (res.isSucceeded) {
            this.afterSubmit();
          } else {
          }
        });
      } else {
        // Ø¯Ø± Ø­Ø§Ù„Øª Ø§ÛŒØ¬Ø§Ø¯
        this.countTypeService.insertRecord(ObjectData).subscribe(res => {
          if (res.isSucceeded) {
            this.afterSubmit();
          } else {
          }
        });
      }
    }
  }

  // Ø¹Ù…Ù„ÛŒØ§Øª Ù¾Ø³ Ø§Ø² Ø«Ø¨Øª ÛŒØ§ ÙˆÛŒØ±Ø§ÛŒØ´
  afterSubmit() {
    this.loadDataTable();
    this.showModal = false;
    this.ObjectForm.reset();
    this.editMode = false;
    this.editingId = null;
  }

  // Ø¯Ø±ÛŒØ§ÙØª Ùˆ Ù†Ù…Ø§ÛŒØ´ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø¬Ù‡Øª ÙˆÛŒØ±Ø§ÛŒØ´
  onEdit(ObjectId: number) {
    this.editMode = true;
    this.editingId = ObjectId;

    this.countTypeService.getRecordById(ObjectId).subscribe(res => {
      if (res.isSucceeded && res.singleData) {
        const Object = res.singleData;

        this.ObjectForm.patchValue({
          id: Object.id,
          name: Object.name,
        });

        this.showModal = true;
      } else {
        this.toastService.error('Ù…ÙˆØ±Ø¯ Ù¾ÛŒØ¯Ø§ Ù†Ø´Ø¯ ÛŒØ§ Ø®Ø·Ø§ Ø¯Ø± Ø¯Ø±ÛŒØ§ÙØª Ø§Ø·Ù„Ø§Ø¹Ø§Øª!' );
      }
    });
  }

  // ---------------------------
  // Pagination
  // ---------------------------
  changePage(pagenumber: number) {
    this._request.pageNumber = pagenumber;
    this.loadDataTable();
  }

  // ---------------------------
  // Selection for Delete
  // ---------------------------
  isSelected(objectId: number): boolean {
    return this.selectedIds.includes(objectId);
  }

  toggleSelection(ObjectId: number): void {
    const index = this.selectedIds.indexOf(ObjectId);
    if (index > -1) {
      this.selectedIds.splice(index, 1);
    } else {
      this.selectedIds.push(ObjectId);
    }
  }

  // ---------------------------
  // Delete Operation
  // ---------------------------
  deleteSelectedRecords(): void {
    this.countTypeService.deleteRecords(this.selectedIds).subscribe(res => {
      if (res.isSucceeded) {
        
        this.afterSubmit(); // Ø±ÛŒØ³Øª ÙØ±Ù… Ùˆ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù…Ø¬Ø¯Ø¯
        this.selectedIds = [];
      } else {
        this.toastService.error( 'Ø®Ø·Ø§ Ø¯Ø± Ø­Ø°Ù Ú¯Ø±ÙˆÙ‡ÛŒ' );
      }
      this.showDeleteConfirm = false;
    });
  }

}



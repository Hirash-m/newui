

<!-- ุฏฺฉููโ ุจุงุฒ ฺฉุฑุฏู ูุฑู ูพุงูพโุขูพ -->
<button cButton color="primary" (click)="showModal = true">โ ุงุฌุงุฏ </button>
<button
  cButton
  color="danger"
  [disabled]="selectedIds.length === 0"
  (click)="showDeleteConfirm = true"
>
๐ ุญุฐู ุงูุชุฎุงุจโุดุฏูโูุง ({{ selectedIds.length }})
</button>


<!-- Table -->

<table cTable>
  <thead>
    <tr>
      <th>ุงูุชุฎุงุจ</th>
      <th>ุดูุงุณู</th>
      <th>ูุงู ฺฉุงุฑุจุฑ</th>
      <th>ุงูู</th>
      <th>ฺฉููู ุนุจูุฑ</th>
      <th>ูุงู ฺฉุงูู </th>
      <th>ุนููุงุช</th>
    </tr>
  </thead>
  <tbody>
     <tr *ngFor="let row of _objectsView">
      <td> <input type="checkbox" [checked]="isSelected(row.id)" (change)="toggleSelection(row.id)" /> </td>
      <td>{{row.id}}</td>
      <td>{{row.username}}</td>
      <td>   {{row.email}}   </td>
      <td>   {{row.Password}}   </td>
      <td>   {{row.fullName}}   </td>
         <td>
          <button class="btn btn-sm btn-warning me-1"    (click)="onEdit(row.id)" > โ ูุฑุงุด</button>
        </td>
    </tr>
  </tbody>
</table>



<!--nodata banner -->

<div *ngIf="_objectsView.length === 0" class="alert alert-info text-center">
  โ ูฺ ุฏุงุฏูโุง ุงูุช ูุดุฏ.
</div>



<div class="d-flex justify-content-between align-items-center mt-3">

  <!-- ุฎูุฏ pagination -->
  <c-pagination aria-label="Page navigation example">
    <li cPageItem *ngIf="_baseResponse.totalPages!!! > 3">
      <button cPageLink aria-label="First" (click)="changePage(1)">
        <span aria-hidden="true">&laquo;</span>
      </button>
    </li>

    <li cPageItem *ngIf="_baseResponse.totalPages!!! > 1">
      <button cPageLink aria-label="Previous" (click)="changePage(_baseResponse.totalPages!!! - 1)">
        <span aria-hidden="true">&lt;</span>
      </button>
    </li>

    <li cPageItem *ngIf="_baseResponse.totalPages!!! > 2">
      <button cPageLink (click)="changePage(_baseResponse.totalPages!!! - 2)">
        {{ _baseResponse.totalPages!!! - 2 }}
      </button>
    </li>

    <li cPageItem *ngIf="_baseResponse.totalPages!!! > 1">
      <button cPageLink (click)="changePage(_baseResponse.totalPages!!! - 1)">
        {{ _baseResponse.totalPages!!! - 1 }}
      </button>
    </li>

    <li cPageItem>
      <button cPageLink class="active" disabled>
        {{ _baseResponse.totalPages!!! }}
      </button>
    </li>

    <li cPageItem *ngIf="_baseResponse.totalPages! > _baseResponse.totalPages!!!">
      <button cPageLink (click)="changePage(_baseResponse.totalPages!!! + 1)">
        {{ _baseResponse.totalPages!!! + 1 }}
      </button>
    </li>

    <li cPageItem *ngIf="_baseResponse.totalPages! > _baseResponse.totalPages!!! + 1">
      <button cPageLink (click)="changePage(_baseResponse.totalPages!!! + 2)">
        {{ _baseResponse.totalPages!!! + 2 }}
      </button>
    </li>

    <li cPageItem *ngIf="_baseResponse.totalPages! > _baseResponse.totalPages!!!">
      <button cPageLink aria-label="Next" (click)="changePage(_baseResponse.totalPages!!! + 1)">
        <span aria-hidden="true">&gt;</span>
      </button>
    </li>

    <li cPageItem *ngIf="_baseResponse.totalPages! > _baseResponse.totalPages!!! + 2">
      <button cPageLink aria-label="Last" (click)="changePage(_baseResponse.totalPages!)">
        <span aria-hidden="true">&raquo;</span>
      </button>
    </li>
  </c-pagination>

  <!-- ุงุทูุงุนุงุช ุฑฺฉูุฑุฏ -->
  <div class="text-muted">
    <strong>{{_baseResponse.totalRecords}}</strong> ุฑฺฉูุฑุฏ ุฏุฑ <strong>{{_baseResponse.totalPages!}}</strong> ุตูุญู
  </div>

</div>






<!-- ููุฏุงู ูุฑู ุงูุฒูุฏู ูุญุตูู -->
<c-modal [(visible)]="showModal" size="lg" backdrop="static">
  <c-modal-header>
    <h5 class="modal-title">{{ editMode ? 'ูุฑุงุด ' : 'ุงูุฒูุฏู' }}</h5>
    <button type="button" class="btn-close" aria-label="Close" (click)="showModal = false"></button>
  </c-modal-header>

  <c-modal-body>
    <!-- ูุฑู ุฏุงุฎู ููุฏุงู -->
    <form [formGroup]="ObjectForm"  (ngSubmit)="onSubmit1()" class="needs-validation" novalidate cForm cRow>

      <!-- ูุงู -->
      <c-col [md]="6">
        <label cLabel for="username">ูุงู ฺฉุงุฑุจุฑ </label>
        <input cFormControl id="username" name="username" type="text" required formControlName="username">
        <c-form-feedback [valid]="false">ูุงู ฺฉุงุฑุจุฑ ุฑุง ูุงุฑุฏ ฺฉูุฏ.</c-form-feedback>
      </c-col>

      <c-col [md]="6">
        <label cLabel for="email">ุงูู </label>
        <input cFormControl id="email" name="email" type="email" required formControlName="email">
        <c-form-feedback [valid]="false">ุงูู ุฑุง ูุงุฑุฏ ฺฉูุฏ.</c-form-feedback>
      </c-col>
      <c-col [md]="6">
        <label cLabel for="fullName">ูุงู ฺฉุงูู </label>
        <input cFormControl id="fullName" name="fullName" type="text" required formControlName="fullName">
        <c-form-feedback [valid]="false">ุงูู ุฑุง ูุงุฑุฏ ฺฉูุฏ.</c-form-feedback>
      </c-col>

      <c-col [md]="6">
        <label cLabel for="Password">ฺฉููู ุนุจูุฑ </label>
        <input cFormControl id="Password" name="Password" type="Password"  formControlName="Password">
        <c-form-feedback [valid]="false">ฺฉููู ุนุจูุฑ  ุฑุง ูุงุฑุฏ ฺฉูุฏ.</c-form-feedback>
      </c-col>


      <!-- ุขูพููุฏ ุชุตูุฑ -->
      <div class="mb-3">
        <label cFormLabel>ุชุตูุฑ ูพุฑููุงู</label>
        <input
          type="file"
          cFormControl
          accept="image/*"
          (change)="onFileSelected($event)"
          class="form-control"
        >
        <small class="text-muted">ููุท ุชุตุงูุฑ (JPG, PNG)</small>
      </div>
 
<!-- ุจุฎุด ููุดโูุง -->
<c-col [md]="12">
  <label cLabel>ููุดโูุง</label>
  <div *ngFor="let role of roles" class="form-check">
    <input
      type="checkbox"
      class="form-check-input"
      [id]="'role-' + role.id"
      [value]="role.id"
      [checked]="ObjectForm.get('roleIds')?.value.includes(role.id)"
      (change)="toggleRole($event, role.id)"
    >
    <label class="form-check-label" [for]="'role-' + role.id">
      {{ role.name }}
    </label>
  </div>
</c-col>




    </form>
  </c-modal-body>

  <c-modal-footer>
    <!-- ุฏฺฉููโูุง ุงุฑุณุงู ู ุจุณุชู -->
    <button cButton color="secondary" (click)="closeModal()" >ุจุณุชู</button>
    <button cButton color="primary" type="submit" (click)="onSubmit1()"  [disabled]="!ObjectForm.valid "  >ุฐุฎุฑู</button>
  </c-modal-footer>
</c-modal>



<c-modal [(visible)]="showDeleteConfirm" col="6" backdrop="static">
  <c-modal-header>
    <h5 class="modal-title">โ ุชุฃุฏ ุญุฐู</h5>
    <button type="button" class="btn-close" (click)="showDeleteConfirm = false" aria-label="Close"></button>
  </c-modal-header>

  <c-modal-body>
    <p>ุขุง ูุทูุฆู ูุณุชุฏ ฺฉู ูโุฎูุงูุฏ <strong>{{ selectedIds.length }}</strong> ูุญุตูู ุงูุชุฎุงุจโุดุฏู ุฑุง ุญุฐู ฺฉูุฏุ</p>
  </c-modal-body>

  <c-modal-footer>
    <button cButton color="secondary" (click)="showDeleteConfirm = false">ุงูุตุฑุงู</button>
    <button cButton color="danger" (click)="deleteSelectedRecords()">ุชุฃุฏ ุญุฐู</button>
  </c-modal-footer>
</c-modal>

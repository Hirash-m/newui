<c-accordion>
  <c-accordion-item #item0="cAccordionItem" [visible]="false">
    <ng-template cTemplateId="accordionHeaderTemplate">
      <button (click)="item0.toggleItem()" [collapsed]="!item0.visible" cAccordionButton>
        ุฌุณุชุฌู ูพุดุฑูุชู
      </button>
    </ng-template>
    <ng-template cTemplateId="accordionBodyTemplate">
      <div class="accordion-body">
<form (ngSubmit)="onSearch()" #searchForm="ngForm">
  <div class="row mb-3">
    <div class="col-md-4">
      <label>ูุงู ูุญุตูู:</label>
      <input type="text" class="form-control" [(ngModel)]="searchData.name" name="name">
    </div>

    <div class="col-md-4">
      <label>ููุช ุญุฏุงูู:</label>
      <input type="number" class="form-control" [(ngModel)]="searchData.minPrice" name="minPrice">
    </div>

    <div class="col-md-4">
      <label>ููุช ุญุฏุงฺฉุซุฑ:</label>
      <input type="number" class="form-control" [(ngModel)]="searchData.maxPrice" name="maxPrice">
    </div>
  </div>

  <div class="row mb-3">
    <div class="col-md-4">
      <label>ูุฑุชุจโุณุงุฒ ุจุฑ ุงุณุงุณ:</label>
      <select class="form-control" [(ngModel)]="searchData.sortBy" name="sortBy">
        <option value="Id">ุดูุงุณู</option>
        <option value="Name">ูุงู</option>
        <option value="Price">ููุช</option>
      </select>
    </div>

    <div class="col-md-6 d-flex align-items-center">
      <div class="form-check mt-4">
        <input class="form-check-input" type="checkbox" [(ngModel)]="searchData.sortDirection" name="sortDirection" id="sortDir">
        <label class="form-check-label" for="sortDir">
          ุตุนูุฏุ
        </label>
      </div>
    </div>
  </div>

  <button type="submit" class="btn btn-primary">ุฌุณุชุฌู</button>
</form>


      </div>
    </ng-template>
  </c-accordion-item>

</c-accordion>

<!-- ุฏฺฉููโ ุจุงุฒ ฺฉุฑุฏู ูุฑู ูพุงูพโุขูพ -->
<button cButton color="primary" (click)="showModal = true">โ ุงุฌุงุฏ ูุญุตูู</button>
<button
  cButton
  color="danger"
  [disabled]="selectedProductIds.length === 0"
  (click)="showDeleteConfirm = true"
>
๐ ุญุฐู ุงูุชุฎุงุจโุดุฏูโูุง ({{ selectedProductIds.length }})
</button>


<!-- Table -->

<table cTable>
  <thead>
    <tr>
      <th>ุงูุชุฎุงุจ</th>
      <th>ุดูุงุณู</th>
      <th>ฺฉุฏ ฺฉุงูุง</th>
      <th>ูุงู</th>
      <th>ููุช</th>
      <th>ุนููุงุช</th>
    </tr>
  </thead>
  <tbody>
     <tr *ngFor="let row of _productsView">
      <th> <input type="checkbox" [checked]="isSelected(row.id)" (change)="toggleSelection(row.id)" /> </th>
      <th>{{row.id}}</th>
      <th>{{row.productCode}}</th>
      <th>{{row.name}}</th>
      <td>{{row.price}}</td>
         <td>
          <button class="btn btn-sm btn-warning me-1"    (click)="onEdit(row.id)" > โ ูุฑุงุด</button>
        </td>
    </tr>
  </tbody>
</table>



<!--nodata banner -->

<div *ngIf="_productsView.length === 0" class="alert alert-info text-center">
  โ ูฺ ุฏุงุฏูโุง ุงูุช ูุดุฏ.
</div>



<div class="d-flex justify-content-between align-items-center mt-3">

  <!-- ุฎูุฏ pagination -->
  <c-pagination aria-label="Page navigation example">
    <li cPageItem *ngIf="_baseResponse.pageNumber > 3">
      <button cPageLink aria-label="First" (click)="changePage(1)">
        <span aria-hidden="true">&laquo;</span>
      </button>
    </li>

    <li cPageItem *ngIf="_baseResponse.pageNumber > 1">
      <button cPageLink aria-label="Previous" (click)="changePage(_baseResponse.pageNumber - 1)">
        <span aria-hidden="true">&lt;</span>
      </button>
    </li>

    <li cPageItem *ngIf="_baseResponse.pageNumber > 2">
      <button cPageLink (click)="changePage(_baseResponse.pageNumber - 2)">
        {{ _baseResponse.pageNumber - 2 }}
      </button>
    </li>

    <li cPageItem *ngIf="_baseResponse.pageNumber > 1">
      <button cPageLink (click)="changePage(_baseResponse.pageNumber - 1)">
        {{ _baseResponse.pageNumber - 1 }}
      </button>
    </li>

    <li cPageItem>
      <button cPageLink class="active" disabled>
        {{ _baseResponse.pageNumber }}
      </button>
    </li>

    <li cPageItem *ngIf="_baseResponse.totalPages > _baseResponse.pageNumber">
      <button cPageLink (click)="changePage(_baseResponse.pageNumber + 1)">
        {{ _baseResponse.pageNumber + 1 }}
      </button>
    </li>

    <li cPageItem *ngIf="_baseResponse.totalPages > _baseResponse.pageNumber + 1">
      <button cPageLink (click)="changePage(_baseResponse.pageNumber + 2)">
        {{ _baseResponse.pageNumber + 2 }}
      </button>
    </li>

    <li cPageItem *ngIf="_baseResponse.totalPages > _baseResponse.pageNumber">
      <button cPageLink aria-label="Next" (click)="changePage(_baseResponse.pageNumber + 1)">
        <span aria-hidden="true">&gt;</span>
      </button>
    </li>

    <li cPageItem *ngIf="_baseResponse.totalPages > _baseResponse.pageNumber + 2">
      <button cPageLink aria-label="Last" (click)="changePage(_baseResponse.totalPages)">
        <span aria-hidden="true">&raquo;</span>
      </button>
    </li>
  </c-pagination>

  <!-- ุงุทูุงุนุงุช ุฑฺฉูุฑุฏ -->
  <div class="text-muted">
    <strong>{{_baseResponse.totalRecords}}</strong> ุฑฺฉูุฑุฏ ุฏุฑ <strong>{{_baseResponse.totalPages}}</strong> ุตูุญู
  </div>

</div>






<!-- ููุฏุงู ูุฑู ุงูุฒูุฏู ูุญุตูู -->
<c-modal [(visible)]="showModal" size="lg" backdrop="static">
  <c-modal-header>
    <h5 class="modal-title">{{ editMode ? 'ูุฑุงุด ูุญุตูู' : 'ุงูุฒูุฏู ูุญุตูู ุฌุฏุฏ' }}</h5>
    <button type="button" class="btn-close" aria-label="Close" (click)="showModal = false"></button>
  </c-modal-header>

  <c-modal-body>
    <!-- ูุฑู ุฏุงุฎู ููุฏุงู -->
    <form [formGroup]="productForm"  (ngSubmit)="onSubmit1()" class="needs-validation" novalidate cForm cRow>

      <!-- ูุงู -->
      <c-col [md]="6">
        <label cLabel for="name">ูุงู ูุญุตูู</label>
        <input cFormControl id="name" name="name" type="text" required formControlName="name" />
        <c-form-feedback [valid]="false">ูุงู ุฑุง ูุงุฑุฏ ฺฉูุฏ.</c-form-feedback>
      </c-col>

      <!-- ฺฉุฏ ฺฉุงูุง -->
      <c-col [md]="6">
        <label cLabel for="productCode">ฺฉุฏ ฺฉุงูุง</label>
        <input cFormControl id="productCode" name="productCode" type="text" required formControlName="productCode" />
        <c-form-feedback [valid]="false">ฺฉุฏ ฺฉุงูุง ุฑุง ูุงุฑุฏ ฺฉูุฏ.</c-form-feedback>
      </c-col>

      <!-- ููุช -->
      <c-col [md]="6">
        <label cLabel for="price">ููุช</label>
        <input cFormControl id="price" name="price" type="number" required formControlName="price" />
        <c-form-feedback [valid]="false">ููุช ูุนุชุจุฑ ูุงุฑุฏ ฺฉูุฏ.</c-form-feedback>
      </c-col>

       <!-- counttype -->
      <c-col [md]="6">
        <label cLabel for="countTypeId">ูุงุญุฏ ุดูุงุฑุด</label>
        <input cFormControl id="countTypeId" name="countTypeId" type="number" required formControlName="countTypeId"  />
        <c-form-feedback [valid]="false"> ูุงุญุฏ ุดูุงุฑุด ุฑุง ุตุญุญ ูุงุฑุฏ ฺฉูุฏ.</c-form-feedback>
      </c-col>


    </form>
  </c-modal-body>

  <c-modal-footer>
    <!-- ุฏฺฉููโูุง ุงุฑุณุงู ู ุจุณุชู -->
    <button cButton color="secondary" (click)="showModal = false">ุจุณุชู</button>
    <button cButton color="primary" type="submit" (click)="onSubmit1()"  [disabled]="!productForm.valid "  >ุฐุฎุฑู</button>
  </c-modal-footer>
</c-modal>



<c-modal [(visible)]="showDeleteConfirm" col="6" backdrop="static">
  <c-modal-header>
    <h5 class="modal-title">โ ุชุฃุฏ ุญุฐู</h5>
    <button type="button" class="btn-close" (click)="showDeleteConfirm = false" aria-label="Close"></button>
  </c-modal-header>

  <c-modal-body>
    <p>ุขุง ูุทูุฆู ูุณุชุฏ ฺฉู ูโุฎูุงูุฏ <strong>{{ selectedProductIds.length }}</strong> ูุญุตูู ุงูุชุฎุงุจโุดุฏู ุฑุง ุญุฐู ฺฉูุฏุ</p>
  </c-modal-body>

  <c-modal-footer>
    <button cButton color="secondary" (click)="showDeleteConfirm = false">ุงูุตุฑุงู</button>
    <button cButton color="danger" (click)="deleteSelectedProducts()">ุชุฃุฏ ุญุฐู</button>
  </c-modal-footer>
</c-modal>
